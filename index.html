<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Hack.F5.Pray - the bijectiv blog</title>
        <meta name="viewport" content="width=device-width">

        <link href='http://themouthofacow.github.io/bijectiv/feed.xml' rel='alternate' type='application/atom+xml'>
        <link rel="stylesheet" href="/bijectiv/resources/css/reset.css" />
        <link rel="stylesheet" href="/bijectiv/resources/css/site.css" />
	    <link rel="stylesheet" href="/bijectiv/resources/css/syntax.css" />
        <script type="text/javascript" src="/bijectiv/resources/scripts/jquery-2.0.3.min.js"></script>
        <script type="text/javascript" src="/bijectiv/resources/scripts/bijectiv.js"></script>
    </head>
    <body onLoad="bijectiv()">
        <div id="all">
            <div id="mast">
                <div id="head">
                    <a href="/bijectiv/"><img id="f5" src="/bijectiv/resources/images/f5.png" alt="Hack F5 Pray logo" /></a>
                    <h1>Hack.F5.Pray - the bijectiv blog - code from the trenches (the mouth of a cow)</h1>
                    <img id="qm" class="right" src="/bijectiv/resources/images/info.png" alt="About the bijectiv blog" />
                </div>
	        </div>
	        <div id="main">

		          
 <div class="post">
    <div class="post-head">
        <img class="ring" src="/bijectiv/resources/images/ring.png" />
        <h2><a href="/bijectiv/infrastructure/2014/03/27/push-and-go.html">Push and go; easy hosting in gh-pages</a></h2>
        <span class="right post-head-date">27 Mar 2014</span><br />
        <span class="right post-head-comments"><a href="/bijectiv/infrastructure/2014/03/27/push-and-go.html#disqus_thread" data-disqus-identifier="/infrastructure/2014/03/27/push-and-go.html">? Comments</a></span>
    </div>
    <div class="post-body">
        <div class="vertical-line right"></div><p><h3>Preamble</h3>

<p>Four days in and I&#39;m really excited by the <a href="http://pages.github.com/">github pages</a> / <a href="http://jekyllrb.com">jekyll</a> static site generator combination. I&#39;m not so sure about the all-in-one solution of uploading the unparsed jekyll site because, being a programmer, I have a natural aversion to committing something I&#39;m not happy with and it requires a commit to see how new content gets rendered. However, working locally with jekyll running in the background is by far the best way to develop a small site that I&#39;ve come across. Databases rule for transactional integrity, but it is starting to become clear that the price one pays for that integrity is really quite high: for tiny data volumes go flat files and a parser, for huge data volumes go hadoop, databases occupy the middle ground.</p>

<p>I think that next time I work on a web project I may well use jekyll to prototype the layout and javascript because it gives such immediate feedback. The template syntax is fairly similar to ASP.NET, so once you&#39;ve got the basic shell working with jekyll then translating that back to ASP is going to be straightforward (this theme originally belonged to the beginnings of an MVC Razor blog).</p>

<h3>Developing with github pages and jekyll</h3>

<p>Something I realised very quickly was that when hosting in <a href="http://pages.github.com/">github pages</a> and using <a href="http://jekyllrb.com">jekyll</a> locally to build the site it is critical that the <em>proto site</em> (i.e. the thing that jekyll actually builds into your site) gets version controlled. Why? well if you mess this up then you will have no way of going back from the built site to its definition. To this end I now have two branches in the github project that are dedicated to the blog:</p>

<ul>
<li><code>gh-pages</code> and;</li>
<li><code>gh-pages-proto</code></li>
</ul>

<p>The branch <code>gh-pages</code> is the special branch that github provides for hosting sites and <code>gh-pages-proto</code> is the branch that contains the code that jekyll builds into <code>gh-pages</code>. The suffix <em>proto</em> means first; giving <code>gh-pages-proto</code> the meaning of the entity that brought about <code>gh-pages</code>.</p>

<p>To work with this setup, at the end of each session I need to:</p>

<ul>
<li>Build the site.</li>
<li>Merge the newly built site over the old one.</li>
<li>Stage, commit and push those changes to <code>gh-pages</code>.</li>
<li>Remove junk I don&#39;t want version controlled from <code>gh-pages-proto</code>.</li>
<li>Stage, commit and push the code changes to <code>gh-pages-proto</code>.</li>
</ul>

<p>This obviously sounds like a total pain to do by hand, so that is why it needs to be automated. The following bash script does this (<code>bash</code> is so much better than Windows <code>batch</code>). To run it you will need to <a href="http://stackoverflow.com/questions/5343068/is-there-a-way-to-skip-password-typing-when-using-https-github">cache your credentials with git</a>: Giri Alwar&#39;s answer works best for me, but my credentials are secure by virtue of their geography, on a public machine this might not work for you.</p>

<h3>Push to <code>gh-pages</code> and <code>gh-pages-proto</code></h3>

<div class="highlight"><pre><code class="bash"><span class="c">#!/bin/bash</span>

<span class="c"># Remember where we are so we can return there at the end of the script</span>
<span class="nb">pushd</span> ./

<span class="c"># 1. Define the directories that contain the two branches.</span>
<span class="c"># The directory that contains the gh-pages branch.</span>
<span class="nv">ghpages</span><span class="o">=</span><span class="s2">&quot;/home/themouthofacow/Documents/bijectiv/gh-pages/&quot;</span>
<span class="c"># The directory that contains the branch containing the code that gets built by jekyll.</span>
<span class="nv">ghpagesproto</span><span class="o">=</span><span class="s2">&quot;/home/themouthofacow/Documents/bijectiv/gh-pages-proto/&quot;</span>

<span class="c"># 2. Build the site using jekyll.</span>
<span class="nb">cd</span> <span class="nv">$ghpagesproto</span>
jekyll build

<span class="c"># 3. Delete everything from gh-pages directory except for the git repository and the ignore file.</span>
<span class="nb">cd</span> <span class="nv">$ghpages</span>
<span class="nb">shopt</span> -s extglob
rm !<span class="o">(</span>.git<span class="p">|</span>.gitignore<span class="o">)</span> -r

<span class="c"># 4. Copy the freshly built site into the gh-pages directory.</span>
cp <span class="nv">$ghpagesproto</span>/_site/* ./ -r
rm <span class="nv">$ghpagesproto</span>/_site -r

<span class="c"># 5. Add everything - this is the clever bit; because git stores hashes of all of the files in the</span>
<span class="c">#    local repository adding everything in fact: removes files that no longer exist; adds the new </span>
<span class="c">#    ones and; updates the ones that have changed. Anything that hasn&#39;t changed is untouched, so you</span>
<span class="c">#    get a perfect incremental commit!</span>
git add -A .
git commit -a -m <span class="s1">&#39;blog updated --tmoac&#39;</span>
git push

<span class="c"># 6. Commit the code that gets built by jekyll.</span>
<span class="nb">cd</span> <span class="nv">$ghpagesproto</span>
git add -A .
git commit -a -m <span class="s1">&#39;site updated --tmoac&#39;</span>
git push

<span class="c"># Return to the original location.</span>
<span class="nb">popd</span>
</code></pre></div>
<p>
    </div>
    <div class="post-foot">
    
	    <div class="post-tag"><a href="/bijectiv/tag/blog">blog</a></div>
    
	    <div class="post-tag"><a href="/bijectiv/tag/infrastructure">infrastructure</a></div>
    
	    <div class="post-tag"><a href="/bijectiv/tag/git">git</a></div>
    
    </div>

</div>

 <div class="post">
    <div class="post-head">
        <img class="ring" src="/bijectiv/resources/images/ring.png" />
        <h2><a href="/bijectiv/background/2014/03/26/why-do-object-to-object-mapping.html">Why do object-to-object mapping?</a></h2>
        <span class="right post-head-date">26 Mar 2014</span><br />
        <span class="right post-head-comments"><a href="/bijectiv/background/2014/03/26/why-do-object-to-object-mapping.html#disqus_thread" data-disqus-identifier="/background/2014/03/26/why-do-object-to-object-mapping.html">? Comments</a></span>
    </div>
    <div class="post-body">
        <div class="vertical-line right"></div><p><p>A system of any kind of scale will almost certainly have multiple parts (database, web-server, client) where each part performs its own distinct function (persists state, provide services, allows user interaction) and; it is generally desirable if the parts can develop independently of one another, whilst still maintaining a strong relationship between the core data that <em>defines</em> the system. In programmer parlance the aim is to achieve something close to message level <a href="http://en.wikipedia.org/wiki/Coupling_(computer_programming)">coupling</a> between the distinct parts. The term <em>parts</em> is deliberately woolly; feel free to interpret it as you wish.</p>

<p>Good design suggests that corresponding to each individual part should be at least one model; again the term <em>model</em> is allowed to be woolly, but it could be thought of as the data structures that comprise the part. So in the above example there might be three distinct models in the system: the <strong>data model</strong>, the <strong>service model</strong> and the <strong>view model</strong>. </p>

<p>To make this more concrete suppose that the system has the concept of a customer; then there might be three models describing that customer, one in the data model, one in the service model and one in the view model.</p>

<blockquote>
<p><code>CustomerDataModel</code> <br />
<code>CustomerServiceModel</code> <br />
<code>CustomerViewModel</code> <br /></p>
</blockquote>

<p>Maybe the <code>CustomerDataModel</code> exposes a complex object graph consisting of the customer&#39;s order history, all previous addresses, contact preferences and the like; in this case it is likely that a restricted view of the customer that only contains a subset of this data is useful. This suggests that corresponding to the <code>CustomerDataModel</code> might be multiple service and view models.</p>

<blockquote>
<p><code>CustomerDataModel</code> <br />
<code>CustomerServiceModel</code> <br />
<code>CustomerHeaderServiceModel</code> <br />
<code>CustomerViewModel</code> <br />
<code>CustomerHeaderViewModel</code> <br /></p>
</blockquote>

<p>Because there are distinct models in each part of the system it is easy (easier) to develop each part separately without needing to worry about changes in one part affecting functionality in some completely different part: all of the methods in the <em>data</em> part should operate on <em>data</em> objects and all of the methods in the <em>view</em> part should operate on <em>view</em> objects, so there is no obvious way that adding a new view only feature in the view part that requires the view model to change slightly (i.e. redesigning a user control) can affect, or be affected by any of the existing functionality in the data part. Sounds awesome right?</p>

<p>But there is a snag...</p>

<p>No coupling means, by definition, no communication and communication is vital for the system to have value. Somehow we need to recouple these parts so that they can talk to each other, but as loosely as possible: the <code>CustomerDataModel</code> needs to to become a <code>CustomerServiceModel</code> so that it can function in the service part, the <code>CustomerServiceModel</code> needs to become a <code>CustomerViewModel</code> so that it can function in the view part and so on and vice verse.</p>

<p>One approach is to have a method that corresponds to each mapping operation:</p>

<div class="highlight"><pre><code class="c#"><span class="lineno"> 1</span> <span class="k">void</span> <span class="nf">CustomerDataModelToCustomerServiceModel</span><span class="p">(</span>
<span class="lineno"> 2</span>     <span class="n">CustomerDataModel</span> <span class="n">source</span><span class="p">,</span> <span class="n">CustomerServiceModel</span> <span class="n">target</span><span class="p">)</span>
<span class="lineno"> 3</span> <span class="p">{</span>
<span class="lineno"> 4</span>     <span class="c1">// ... explicit mapping code </span>
<span class="lineno"> 5</span> <span class="p">}</span>
<span class="lineno"> 6</span>  
<span class="lineno"> 7</span> <span class="k">void</span> <span class="nf">CustomerDataModelToCustomerHeaderServiceModel</span><span class="p">(</span>
<span class="lineno"> 8</span>     <span class="n">CustomerDataModel</span> <span class="n">source</span><span class="p">,</span> <span class="n">CustomerServiceHeaderModel</span> <span class="n">target</span><span class="p">);</span>
<span class="lineno"> 9</span> <span class="p">{</span>
<span class="lineno">10</span>     <span class="c1">// ... explicit mapping code </span>
<span class="lineno">11</span> <span class="p">}</span>
<span class="lineno">12</span> 
<span class="lineno">13</span> <span class="k">void</span> <span class="nf">CustomerServiceModelToCustomerDataModel</span><span class="p">(</span>
<span class="lineno">14</span>     <span class="n">CustomerServiceModel</span> <span class="n">source</span><span class="p">,</span> <span class="n">CustomerDataModel</span> <span class="n">target</span><span class="p">);</span>
<span class="lineno">15</span> <span class="p">{</span>
<span class="lineno">16</span>     <span class="c1">// ... explicit mapping code </span>
<span class="lineno">17</span> <span class="p">}</span>
<span class="lineno">18</span> 
<span class="lineno">19</span>  <span class="c1">// ...</span>
</code></pre></div>

<p>But even with this simple example there are at least 8 mapping operations that make good sense, not even considering any nested maps required, and already we are staring directly at a maintenance nightmare. The cunning plan to decouple our system is now looking less than inviting.</p>

<p>It is here that the object-to-object mapper comes to the rescue. A mapper can replace boilerplate mapping methods with simple configuration expressed in easy to read fluent syntax, similarly to the way the <a href="https://entityframework.codeplex.com/">Entity Framework</a> defines maps between CLR types and database tables, or <a href="https://github.com/autofac/Autofac">Autofac</a> describes the steps required to construct a type. </p>

<p>The hope is that it can be configured in a module that looks something like the following (rather optimistic) snippit:</p>

<div class="highlight"><pre><code class="c#"><span class="lineno">1</span> <span class="n">builder</span><span class="p">.</span><span class="n">RegisterTransform</span><span class="p">&lt;</span><span class="n">CustomerDataModel</span><span class="p">,</span> <span class="n">CustomerServiceModel</span><span class="p">&gt;();</span>
<span class="lineno">2</span> <span class="n">builder</span><span class="p">.</span><span class="n">RegisterTransform</span><span class="p">&lt;</span><span class="n">CustomerDataModel</span><span class="p">,</span> <span class="n">CustomerServiceHeaderModel</span><span class="p">&gt;();</span>
<span class="lineno">3</span> <span class="n">builder</span><span class="p">.</span><span class="n">RegisterTransform</span><span class="p">&lt;</span><span class="n">CustomerServiceModel</span><span class="p">,</span> <span class="n">CustomerDataModel</span><span class="p">&gt;();</span>
<span class="lineno">4</span> 
<span class="lineno">5</span> <span class="c1">// ...</span>
</code></pre></div>

<p>And then later, where it is necessary to transform between models, the mapper is called as:</p>

<div class="highlight"><pre><code class="c#"><span class="lineno">1</span> <span class="kt">var</span> <span class="n">customerService</span> <span class="p">=</span> <span class="n">transformer</span><span class="p">.</span><span class="n">Make</span><span class="p">&lt;</span><span class="n">CustomerServiceModel</span><span class="p">&gt;(</span><span class="n">customerData</span><span class="p">);</span>
</code></pre></div>

<p>The transformation rules live in their own well structured, testable module, that is itself decoupled from the other parts of the system and these define a <code>transformer</code> that can be used anywhere to perform the transformation operations. The mapping module is the coupling point: no part knows about any other, but the mapping module knows how to transform between the various models and so provides the glue that makes system-wide communication possible.</p>

<p>Its a very powerful concept, but unlike <a href="http://en.wikipedia.org/wiki/Dependency_injection">dependency injection</a> the lack of any library as good as <a href="https://github.com/autofac/Autofac">Autofac</a> for me makes it hard to adopt; specifically because it really gets embedded in the overall architecture like an IoC container.</p>
<p>
    </div>
    <div class="post-foot">
    
	    <div class="post-tag"><a href="/bijectiv/tag/code">code</a></div>
    
	    <div class="post-tag"><a href="/bijectiv/tag/background">background</a></div>
    
	    <div class="post-tag"><a href="/bijectiv/tag/planning">planning</a></div>
    
    </div>

</div>

 <div class="post">
    <div class="post-head">
        <img class="ring" src="/bijectiv/resources/images/ring.png" />
        <h2><a href="/bijectiv/infrastructure/2014/03/25/beautify-the-blog.html">bijective.blog.Beautify</a></h2>
        <span class="right post-head-date">25 Mar 2014</span><br />
        <span class="right post-head-comments"><a href="/bijectiv/infrastructure/2014/03/25/beautify-the-blog.html#disqus_thread" data-disqus-identifier="/infrastructure/2014/03/25/beautify-the-blog.html">? Comments</a></span>
    </div>
    <div class="post-body">
        <div class="vertical-line right"></div><p><p>For dyed in the wool visual studio fanboys like myself the blog theme will be clear - it is an homage to the king of IDEs itself (the 2012 edition where form was emphasised so heavily over function in release 1 that it was no longer possible to develop WPF applications visually due to the black artboard: in fact later on in the development cycle when applications had grown into hundred view monsters that bootstrapped from autofac through caliburn the designer just stopped working anyway, at which point everyone switched it off and coded blind like zatoichi - feeling their way through nested markup extensions, in edaphic genuflection looking for some rhyme or reason).</p>

<p>Anyway, the point of this is that the blog now has a style, which is both highly derivative, not at all uber and definitely not fit for purpose. But just check out the cool guideline at 120 characters - only the real pros have one of those in their IDE. (Actually it renders at something like 140 characters, but 120 is where you want to be).</p>

<p>And for fun the code gets rendered like in visual studio on the black background where it is really difficult to read what&#39;s going on, but not as hard as it is in the solution explorer where you generally feel like an eskimo with a really bad case of snow blindness. </p>

<p><em>Example</em></p>

<div class="highlight"><pre><code class="c#"><span class="lineno"> 1</span> <span class="k">namespace</span> <span class="nn">Xamlr.Core.Xaml</span>
<span class="lineno"> 2</span> <span class="p">{</span>
<span class="lineno"> 3</span>     <span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="lineno"> 4</span>     <span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="lineno"> 5</span>     <span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="lineno"> 6</span>     <span class="k">using</span> <span class="nn">System.Linq.Expressions</span><span class="p">;</span>
<span class="lineno"> 7</span>     <span class="k">using</span> <span class="nn">System.Reflection</span><span class="p">;</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span>     <span class="k">using</span> <span class="nn">JetBrains.Annotations</span><span class="p">;</span>
<span class="lineno">10</span> 
<span class="lineno">11</span>     <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">12</span>     <span class="c1">/// A factory that produces &lt;see cref=&quot;IFormatter&quot;/&gt; instances.</span>
<span class="lineno">13</span>     <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">14</span>     <span class="k">internal</span> <span class="k">class</span> <span class="nc">FormatterFactory</span>
<span class="lineno">15</span>     <span class="p">{</span>
<span class="lineno">16</span>         <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">17</span>         <span class="c1">/// The individual factories that produce the formatters.</span>
<span class="lineno">18</span>         <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">19</span>         <span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">FragmentType</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">FormattingContext</span><span class="p">,</span> <span class="n">IFormatter</span><span class="p">&gt;&gt;</span> <span class="n">Factories</span><span class="p">;</span>
<span class="lineno">20</span> 
<span class="lineno">21</span>         <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">22</span>         <span class="c1">/// The formatting context.</span>
<span class="lineno">23</span>         <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">24</span>         <span class="k">private</span> <span class="k">readonly</span> <span class="n">FormattingContext</span> <span class="n">context</span><span class="p">;</span>
<span class="lineno">25</span> 
<span class="lineno">26</span>         <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">27</span>         <span class="c1">/// Initializes static members of the &lt;see cref=&quot;FormatterFactory&quot;/&gt; class.</span>
<span class="lineno">28</span>         <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">29</span>         <span class="k">static</span> <span class="nf">FormatterFactory</span><span class="p">()</span>
<span class="lineno">30</span>         <span class="p">{</span>
<span class="lineno">31</span>             <span class="kt">var</span> <span class="n">parameter</span> <span class="p">=</span> <span class="n">Expression</span><span class="p">.</span><span class="n">Parameter</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">FormattingContext</span><span class="p">));</span>
<span class="lineno">32</span>             <span class="n">Factories</span> <span class="p">=</span> <span class="n">Assembly</span>
<span class="lineno">33</span>                 <span class="p">.</span><span class="n">GetAssembly</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">FormatterFactory</span><span class="p">))</span>
<span class="lineno">34</span>                 <span class="p">.</span><span class="n">GetTypes</span><span class="p">()</span>
<span class="lineno">35</span>                 <span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">candidate</span> <span class="p">=&gt;</span> <span class="n">candidate</span><span class="p">.</span><span class="n">IsClass</span><span class="p">)</span>
<span class="lineno">36</span>                 <span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">candidate</span> <span class="p">=&gt;</span> <span class="k">typeof</span><span class="p">(</span><span class="n">IFormatter</span><span class="p">).</span><span class="n">IsAssignableFrom</span><span class="p">(</span><span class="n">candidate</span><span class="p">))</span>
<span class="lineno">37</span>                 <span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">candidate</span> <span class="p">=&gt;</span> <span class="n">candidate</span><span class="p">.</span><span class="n">GetCustomAttributes</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">FragmentFormatterAttribute</span><span class="p">),</span> <span class="k">false</span><span class="p">).</span><span class="n">Any</span><span class="p">())</span>
<span class="lineno">38</span>                 <span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">type</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="p">{</span> <span class="n">Type</span> <span class="p">=</span> <span class="n">type</span><span class="p">,</span> <span class="n">Ctor</span> <span class="p">=</span> <span class="n">type</span><span class="p">.</span><span class="n">GetConstructor</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="k">typeof</span><span class="p">(</span><span class="n">FormattingContext</span><span class="p">)</span> <span class="p">})</span> <span class="p">})</span>
<span class="lineno">39</span>                 <span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">tmp</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="p">{</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">Exp</span> <span class="p">=</span> <span class="n">Expression</span><span class="p">.</span><span class="n">Convert</span><span class="p">(</span><span class="n">Expression</span><span class="p">.</span><span class="n">New</span><span class="p">(</span><span class="n">tmp</span><span class="p">.</span><span class="n">Ctor</span><span class="p">,</span> <span class="n">parameter</span><span class="p">),</span> <span class="k">typeof</span><span class="p">(</span><span class="n">IFormatter</span><span class="p">))</span> <span class="p">})</span>
<span class="lineno">40</span>                 <span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">tmp</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="p">{</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">Exp</span> <span class="p">=</span> <span class="n">Expression</span><span class="p">.</span><span class="n">Lambda</span><span class="p">&lt;</span><span class="n">Func</span><span class="p">&lt;</span><span class="n">FormattingContext</span><span class="p">,</span> <span class="n">IFormatter</span><span class="p">&gt;&gt;(</span><span class="n">tmp</span><span class="p">.</span><span class="n">Exp</span><span class="p">,</span> <span class="n">parameter</span><span class="p">)</span> <span class="p">})</span>
<span class="lineno">41</span>                 <span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">tmp</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="p">{</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">Factory</span> <span class="p">=</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Exp</span><span class="p">.</span><span class="n">Compile</span><span class="p">()</span> <span class="p">})</span>
<span class="lineno">42</span>                 <span class="p">.</span><span class="n">ToDictionary</span><span class="p">(</span><span class="n">tmp</span> <span class="p">=&gt;</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Type</span><span class="p">.</span><span class="n">GetCustomAttributes</span><span class="p">(</span><span class="k">false</span><span class="p">).</span><span class="n">OfType</span><span class="p">&lt;</span><span class="n">FragmentFormatterAttribute</span><span class="p">&gt;().</span><span class="n">First</span><span class="p">().</span><span class="n">Type</span><span class="p">,</span> <span class="n">tmp</span> <span class="p">=&gt;</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Factory</span><span class="p">);</span>
<span class="lineno">43</span>         <span class="p">}</span>
<span class="lineno">44</span> 
<span class="lineno">45</span>         <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">46</span>         <span class="c1">/// Initializes a new instance of the &lt;see cref=&quot;FormatterFactory&quot;/&gt; class.</span>
<span class="lineno">47</span>         <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">48</span>         <span class="c1">/// &lt;param name=&quot;context&quot;&gt;</span>
<span class="lineno">49</span>         <span class="c1">/// The context.</span>
<span class="lineno">50</span>         <span class="c1">/// &lt;/param&gt;</span>
<span class="lineno">51</span>         <span class="k">public</span> <span class="nf">FormatterFactory</span><span class="p">([</span><span class="n">NotNull</span><span class="p">]</span> <span class="n">FormattingContext</span> <span class="n">context</span><span class="p">)</span>
<span class="lineno">52</span>         <span class="p">{</span>
<span class="lineno">53</span>             <span class="k">if</span> <span class="p">(</span><span class="n">context</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
<span class="lineno">54</span>             <span class="p">{</span>
<span class="lineno">55</span>                 <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">&quot;context&quot;</span><span class="p">);</span>
<span class="lineno">56</span>             <span class="p">}</span>
<span class="lineno">57</span> 
<span class="lineno">58</span>             <span class="k">this</span><span class="p">.</span><span class="n">context</span> <span class="p">=</span> <span class="n">context</span><span class="p">;</span>
<span class="lineno">59</span>         <span class="p">}</span>
<span class="lineno">60</span> 
<span class="lineno">61</span>         <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">62</span>         <span class="c1">/// Creates a &lt;see cref=&quot;IFormatter&quot;/&gt; that can format a fragment of type &lt;paramref name=&quot;type&quot;/&gt;.</span>
<span class="lineno">63</span>         <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">64</span>         <span class="c1">/// &lt;param name=&quot;type&quot;&gt;</span>
<span class="lineno">65</span>         <span class="c1">/// The fragment type.</span>
<span class="lineno">66</span>         <span class="c1">/// &lt;/param&gt;</span>
<span class="lineno">67</span>         <span class="c1">/// &lt;returns&gt;</span>
<span class="lineno">68</span>         <span class="c1">/// A &lt;see cref=&quot;IFormatter&quot;/&gt; that can format a fragment of type &lt;paramref name=&quot;type&quot;/&gt;.</span>
<span class="lineno">69</span>         <span class="c1">/// &lt;/returns&gt;</span>
<span class="lineno">70</span>         <span class="k">public</span> <span class="n">IFormatter</span> <span class="nf">Create</span><span class="p">(</span><span class="n">FragmentType</span> <span class="n">type</span><span class="p">)</span>
<span class="lineno">71</span>         <span class="p">{</span>
<span class="lineno">72</span>             <span class="k">return</span> <span class="n">Factories</span><span class="p">[</span><span class="n">type</span><span class="p">](</span><span class="k">this</span><span class="p">.</span><span class="n">context</span><span class="p">);</span>
<span class="lineno">73</span>         <span class="p">}</span>
<span class="lineno">74</span>     <span class="p">}</span>
<span class="lineno">75</span> <span class="p">}</span>
</code></pre></div>

<p>See how on line 42 the code blunders well over the guide. Apologies to Linux users; there seems to be a huge discrepancy in size between Windows monospaced and Linux monospaced fonts and so the code looks piddly on Linux.</p>
<p>
    </div>
    <div class="post-foot">
    
	    <div class="post-tag"><a href="/bijectiv/tag/blog">blog</a></div>
    
	    <div class="post-tag"><a href="/bijectiv/tag/infrastructure">infrastructure</a></div>
    
    </div>

</div>

 <div class="post">
    <div class="post-head">
        <img class="ring" src="/bijectiv/resources/images/ring.png" />
        <h2><a href="/bijectiv/infrastructure/2014/03/24/build-the-blog.html">bijective.Initialize</a></h2>
        <span class="right post-head-date">24 Mar 2014</span><br />
        <span class="right post-head-comments"><a href="/bijectiv/infrastructure/2014/03/24/build-the-blog.html#disqus_thread" data-disqus-identifier="/infrastructure/2014/03/24/build-the-blog.html">? Comments</a></span>
    </div>
    <div class="post-body">
        <div class="vertical-line right"></div><p><p>Step 1 has been getting the blog set up (maybe that it more like step 7). By day I build .NET enterprise stuff, it is quite funky for .NET enterprise stuff, but not cool. It seems like the internet is for cool kids and cool kids like static sites: that makes sense to me, the thing that has been putting me off blogging is the heavyweight bloat and lack of control you get with workpress (a typeo but I like it, sic.) or its peers. Cool kids also it seems like github - being deeply ingrained in the Microsoft stack I&#39;m more of a CodePlex kind of guy, but hey back when I was cool (read didn&#39;t have children) I used git and linux (gentoo from back in the day that there was a 23 page install guide and that took 4 days to complete and you installed everything from source and maybe it might boot into KDE at the end - emerge world of course never worked), so I&#39;m going to publish this with jekyll from a mint VM. I know, I know, jekyll is way not cool and there is somthing much more uber out there that will rock my world, but the quick start guide was almost that (although it was nice to see that the person who packaged it in mint forgot the ruby dev dependencies - that gave me the good old time linux feel).</p>
<p>
    </div>
    <div class="post-foot">
    
	    <div class="post-tag"><a href="/bijectiv/tag/blog">blog</a></div>
    
	    <div class="post-tag"><a href="/bijectiv/tag/infrastructure">infrastructure</a></div>
    
    </div>

</div>

<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'bijectiv'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script> 



	            </div>
            <div id="foot">
	            <p>Rebuild All succeeded - 2014 - London - UK | <a href="http://github.com/TheMouthOfACow">http://github.com/TheMouthOfACow</a> | <a href="https://twitter.com/TheMouthOfACow">https://twitter.com/TheMouthOfACow</a> | <a href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0 licence</a>
	            </p>
            </div>
            <div id="overlay"></div>
            <!--<div id="the-world-is-yours">
                <iframe src="/bijectiv/moon.html" width="800" height="800"></iframe> 
            </div>-->
	        <div id="about">
		        <img id="about-close" src="/bijectiv/resources/images/ring.png" />

                <h1>About</h1>
                <div>
                    <img class="right" src="https://download-codeplex.sec.s-msft.com/download/Avatar.ashx?DownloadId=815244" alt="Brian Tyler" />
                    <p>This site documents how the <a href="https://github.com/TheMouthOfACow/bijectiv" />bijectiv</a> object-to-object .NET mapping library got/is getting built.<p>
                    <p>Bijectiv is (being) written by Brian Tyler in his (very limited, see small child to the right) spare time; by day I'm a technical architect developer at Aon's global headquarters in London, the rest of the time I do <a href="http://kozuetyler.wordpress.com/">family stuff</a>.</p>
                    <p>The purpose of the library is to provide an industrial strength, open source mapper for .NET and the reason for the blog is to describe why it is built the way it is and to act as a resource for other developers who are interested in how a library could be designed and coded.</p>
                    <p>The blog is written using <a href="http://jekyllrb.com/">Jekyll</a> on Mint Linux (apparently that's the way the cool kids do it these days). The library is written in Visual Studio 2013 Ultimate on Windows 8.1 and runs portably in the .NET 4.0 runtime.</p>
                    <h2>Copyleft</h2>
                    <p>You do not need permission to share anything I have written on this site or to reuse my images even for commercial purposes. They are all published under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International (CC BY 4.0) licence</a>. A mention of the licence however is compulsory and a link back to the original is a nice courtesy.</p>
                    <p>... this comes with an observation: cloning posts wholesale doesn't create value it just just increases universal entropy.</p>
                    <h2>More</h2>
                    <br />
                    <div class="right" style="margin-right:5px;"><a href="http://stackoverflow.com/users/323316/the-mouth-of-a-cow">
<img src="http://stackoverflow.com/users/flair/323316.png?theme=clean" width="208" height="58" alt="profile for The Mouth of a Cow at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for The Mouth of a Cow at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
</a>
</div>
                    <p>I love <a href="http://stackoverflow.com">stackoverflow</a>, but I don't answer questions much there anymore because people vote for <a href="http://stackoverflow.com/questions/5598703/c-const-usage-explanation/5598730#5598730">regurgitating trivia</a> not <a href="http://stackoverflow.com/questions/10698915/invalid-type-owner-for-dynamicmethod-error-when-sorting-an-interface/13790392#13790392">hardcore software engineering</a>.</p>
                <p>I've written an open source visual studio extension called <a href="https://xamlr.codeplex.com/">Xamlr</a> that formats XAML files. If you write XAML, you need this!</p>
                </div>
	        </div>
	        <script type="text/javascript" >
	            $( "#about-close" ).click(function() {
		            $( "#overlay" ).hide();
		            $( "#about" ).hide();
                    $( "#the-world-is-yours" ).hide();
	            });

                $( "#the-world-is-yours" ).click(function() {
		            $( "#overlay" ).hide();
		            $( "#about" ).hide();
                    $( "#the-world-is-yours" ).hide();
	            });
	
	            $( "#overlay" ).click(function() {
		            $( "#overlay" ).hide();
		            $( "#about" ).hide();
                    $( "#the-world-is-yours" ).hide();
	            });
	
	            $(document).keyup(function(e) {
	              if (e.keyCode == 27) {
		            $( "#overlay" ).hide();
		            $( "#about" ).hide();
                    $( "#the-world-is-yours" ).hide();
	            }   // esc
	            });
	
	            $( "#qm" ).click(function() {
		            $( "#overlay" ).show();
		            $( "#about" ).show();
                    $( "#the-world-is-yours" ).hide();
	            });

                $( "#easter" ).click(function() {
		            $( "#overlay" ).show();
		            $( "#about" ).hide();
                    $( "#the-world-is-yours" ).show();
	            });
	        </script>
        </div>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-5245850-6', 'themouthofacow.github.io');
          ga('send', 'pageview');

        </script>
    </body>
</html>
