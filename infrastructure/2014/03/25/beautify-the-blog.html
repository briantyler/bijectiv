<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>bijective.blog.Beautify</title>
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="/bijectiv/resources/css/reset.css" />
        <link rel="stylesheet" href="/bijectiv/resources/css/site.css" />
	    <link rel="stylesheet" href="/bijectiv/resources/css/syntax.css" />
        <script type="text/javascript" src="/bijectiv/resources/scripts/jquery-2.0.3.min.js"></script>
        <script type="text/javascript" src="/bijectiv/resources/scripts/bijectiv.js"></script>
    </head>
    <body onLoad="bijectiv()">
        <div id="all">
            <div id="mast">
                <div id="head">
                    <a href="/bijectiv/"><img id="f5" src="/bijectiv/resources/images/f5.png" alt="Hack F5 Pray logo" /></a>
                    <h1>Hack.F5.Pray - the bijectiv blog - code from the trenches (the mouth of a cow)</h1>
                    <img id="qm" class="right" src="/bijectiv/resources/images/info.png" alt="About Hack F5 Pray" />
                </div>
	        </div>
	        <div id="main">

		          <div class="post">
    <div class="post-head">
        <img src="/bijectiv/resources//images/ring.png" />
        <h2><a href="/bijectiv/infrastructure/2014/03/25/beautify-the-blog.html">bijective.blog.Beautify</a></h2>
        <span class="right post-head-date">25 Mar 2014</span>
    </div>
    <div class="post-body"><div class="vertical-line right"></div><p>For dyed in the wool visual studio fanboys like myself the blog theme will be clear - it is an homage to the king of IDEs itself (the 2012 edition where form was emphasised so heavily over function in release 1 that it was no longer possible to develop WPF applications visually due to the black artboard: in fact later on in the development cycle when applications had grown into hundred view monsters that bootstrapped from autofac through caliburn the designer just stopped working anyway, at which point everyone switched it off and coded blind like zatoichi - feeling their way through nested markup extensions, in edaphic genuflection looking for some rhyme or reason).</p>

<p>Anyway, the point of this is that the blog now has a style, which is both highly derivative, not at all uber and definitely not fit for purpose. But just check out the cool guideline at 120 characters - only the real pros have one of those in their IDE. (Actually it renders at something like 140 characters, but 120 is where you want to be).</p>

<p>And for fun the code gets rendered like in visual studio on the black background where it is really difficult to read what&#39;s going on, but not as hard as it is in the solution explorer where you generally feel like an eskimo with a really bad case of snow blindness. </p>

<p><em>Example</em></p>

<div class="highlight"><pre><code class="c#"><span class="lineno"> 1</span> <span class="k">namespace</span> <span class="nn">Xamlr.Core.Xaml</span>
<span class="lineno"> 2</span> <span class="p">{</span>
<span class="lineno"> 3</span>     <span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="lineno"> 4</span>     <span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="lineno"> 5</span>     <span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="lineno"> 6</span>     <span class="k">using</span> <span class="nn">System.Linq.Expressions</span><span class="p">;</span>
<span class="lineno"> 7</span>     <span class="k">using</span> <span class="nn">System.Reflection</span><span class="p">;</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span>     <span class="k">using</span> <span class="nn">JetBrains.Annotations</span><span class="p">;</span>
<span class="lineno">10</span> 
<span class="lineno">11</span>     <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">12</span>     <span class="c1">/// A factory that produces &lt;see cref=&quot;IFormatter&quot;/&gt; instances.</span>
<span class="lineno">13</span>     <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">14</span>     <span class="k">internal</span> <span class="k">class</span> <span class="nc">FormatterFactory</span>
<span class="lineno">15</span>     <span class="p">{</span>
<span class="lineno">16</span>         <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">17</span>         <span class="c1">/// The individual factories that produce the formatters.</span>
<span class="lineno">18</span>         <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">19</span>         <span class="k">private</span> <span class="k">static</span> <span class="k">readonly</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="n">FragmentType</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">FormattingContext</span><span class="p">,</span> <span class="n">IFormatter</span><span class="p">&gt;&gt;</span> <span class="n">Factories</span><span class="p">;</span>
<span class="lineno">20</span> 
<span class="lineno">21</span>         <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">22</span>         <span class="c1">/// The formatting context.</span>
<span class="lineno">23</span>         <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">24</span>         <span class="k">private</span> <span class="k">readonly</span> <span class="n">FormattingContext</span> <span class="n">context</span><span class="p">;</span>
<span class="lineno">25</span> 
<span class="lineno">26</span>         <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">27</span>         <span class="c1">/// Initializes static members of the &lt;see cref=&quot;FormatterFactory&quot;/&gt; class.</span>
<span class="lineno">28</span>         <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">29</span>         <span class="k">static</span> <span class="nf">FormatterFactory</span><span class="p">()</span>
<span class="lineno">30</span>         <span class="p">{</span>
<span class="lineno">31</span>             <span class="kt">var</span> <span class="n">parameter</span> <span class="p">=</span> <span class="n">Expression</span><span class="p">.</span><span class="n">Parameter</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">FormattingContext</span><span class="p">));</span>
<span class="lineno">32</span>             <span class="n">Factories</span> <span class="p">=</span> <span class="n">Assembly</span>
<span class="lineno">33</span>                 <span class="p">.</span><span class="n">GetAssembly</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">FormatterFactory</span><span class="p">))</span>
<span class="lineno">34</span>                 <span class="p">.</span><span class="n">GetTypes</span><span class="p">()</span>
<span class="lineno">35</span>                 <span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">candidate</span> <span class="p">=&gt;</span> <span class="n">candidate</span><span class="p">.</span><span class="n">IsClass</span><span class="p">)</span>
<span class="lineno">36</span>                 <span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">candidate</span> <span class="p">=&gt;</span> <span class="k">typeof</span><span class="p">(</span><span class="n">IFormatter</span><span class="p">).</span><span class="n">IsAssignableFrom</span><span class="p">(</span><span class="n">candidate</span><span class="p">))</span>
<span class="lineno">37</span>                 <span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">candidate</span> <span class="p">=&gt;</span> <span class="n">candidate</span><span class="p">.</span><span class="n">GetCustomAttributes</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">FragmentFormatterAttribute</span><span class="p">),</span> <span class="k">false</span><span class="p">).</span><span class="n">Any</span><span class="p">())</span>
<span class="lineno">38</span>                 <span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">type</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="p">{</span> <span class="n">Type</span> <span class="p">=</span> <span class="n">type</span><span class="p">,</span> <span class="n">Ctor</span> <span class="p">=</span> <span class="n">type</span><span class="p">.</span><span class="n">GetConstructor</span><span class="p">(</span><span class="k">new</span><span class="p">[]</span> <span class="p">{</span> <span class="k">typeof</span><span class="p">(</span><span class="n">FormattingContext</span><span class="p">)</span> <span class="p">})</span> <span class="p">})</span>
<span class="lineno">39</span>                 <span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">tmp</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="p">{</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">Exp</span> <span class="p">=</span> <span class="n">Expression</span><span class="p">.</span><span class="n">Convert</span><span class="p">(</span><span class="n">Expression</span><span class="p">.</span><span class="n">New</span><span class="p">(</span><span class="n">tmp</span><span class="p">.</span><span class="n">Ctor</span><span class="p">,</span> <span class="n">parameter</span><span class="p">),</span> <span class="k">typeof</span><span class="p">(</span><span class="n">IFormatter</span><span class="p">))</span> <span class="p">})</span>
<span class="lineno">40</span>                 <span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">tmp</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="p">{</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">Exp</span> <span class="p">=</span> <span class="n">Expression</span><span class="p">.</span><span class="n">Lambda</span><span class="p">&lt;</span><span class="n">Func</span><span class="p">&lt;</span><span class="n">FormattingContext</span><span class="p">,</span> <span class="n">IFormatter</span><span class="p">&gt;&gt;(</span><span class="n">tmp</span><span class="p">.</span><span class="n">Exp</span><span class="p">,</span> <span class="n">parameter</span><span class="p">)</span> <span class="p">})</span>
<span class="lineno">41</span>                 <span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">tmp</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="p">{</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Type</span><span class="p">,</span> <span class="n">Factory</span> <span class="p">=</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Exp</span><span class="p">.</span><span class="n">Compile</span><span class="p">()</span> <span class="p">})</span>
<span class="lineno">42</span>                 <span class="p">.</span><span class="n">ToDictionary</span><span class="p">(</span><span class="n">tmp</span> <span class="p">=&gt;</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Type</span><span class="p">.</span><span class="n">GetCustomAttributes</span><span class="p">(</span><span class="k">false</span><span class="p">).</span><span class="n">OfType</span><span class="p">&lt;</span><span class="n">FragmentFormatterAttribute</span><span class="p">&gt;().</span><span class="n">First</span><span class="p">().</span><span class="n">Type</span><span class="p">,</span> <span class="n">tmp</span> <span class="p">=&gt;</span> <span class="n">tmp</span><span class="p">.</span><span class="n">Factory</span><span class="p">);</span>
<span class="lineno">43</span>         <span class="p">}</span>
<span class="lineno">44</span> 
<span class="lineno">45</span>         <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">46</span>         <span class="c1">/// Initializes a new instance of the &lt;see cref=&quot;FormatterFactory&quot;/&gt; class.</span>
<span class="lineno">47</span>         <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">48</span>         <span class="c1">/// &lt;param name=&quot;context&quot;&gt;</span>
<span class="lineno">49</span>         <span class="c1">/// The context.</span>
<span class="lineno">50</span>         <span class="c1">/// &lt;/param&gt;</span>
<span class="lineno">51</span>         <span class="k">public</span> <span class="nf">FormatterFactory</span><span class="p">([</span><span class="n">NotNull</span><span class="p">]</span> <span class="n">FormattingContext</span> <span class="n">context</span><span class="p">)</span>
<span class="lineno">52</span>         <span class="p">{</span>
<span class="lineno">53</span>             <span class="k">if</span> <span class="p">(</span><span class="n">context</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
<span class="lineno">54</span>             <span class="p">{</span>
<span class="lineno">55</span>                 <span class="k">throw</span> <span class="k">new</span> <span class="nf">ArgumentNullException</span><span class="p">(</span><span class="s">&quot;context&quot;</span><span class="p">);</span>
<span class="lineno">56</span>             <span class="p">}</span>
<span class="lineno">57</span> 
<span class="lineno">58</span>             <span class="k">this</span><span class="p">.</span><span class="n">context</span> <span class="p">=</span> <span class="n">context</span><span class="p">;</span>
<span class="lineno">59</span>         <span class="p">}</span>
<span class="lineno">60</span> 
<span class="lineno">61</span>         <span class="c1">/// &lt;summary&gt;</span>
<span class="lineno">62</span>         <span class="c1">/// Creates a &lt;see cref=&quot;IFormatter&quot;/&gt; that can format a fragment of type &lt;paramref name=&quot;type&quot;/&gt;.</span>
<span class="lineno">63</span>         <span class="c1">/// &lt;/summary&gt;</span>
<span class="lineno">64</span>         <span class="c1">/// &lt;param name=&quot;type&quot;&gt;</span>
<span class="lineno">65</span>         <span class="c1">/// The fragment type.</span>
<span class="lineno">66</span>         <span class="c1">/// &lt;/param&gt;</span>
<span class="lineno">67</span>         <span class="c1">/// &lt;returns&gt;</span>
<span class="lineno">68</span>         <span class="c1">/// A &lt;see cref=&quot;IFormatter&quot;/&gt; that can format a fragment of type &lt;paramref name=&quot;type&quot;/&gt;.</span>
<span class="lineno">69</span>         <span class="c1">/// &lt;/returns&gt;</span>
<span class="lineno">70</span>         <span class="k">public</span> <span class="n">IFormatter</span> <span class="nf">Create</span><span class="p">(</span><span class="n">FragmentType</span> <span class="n">type</span><span class="p">)</span>
<span class="lineno">71</span>         <span class="p">{</span>
<span class="lineno">72</span>             <span class="k">return</span> <span class="n">Factories</span><span class="p">[</span><span class="n">type</span><span class="p">](</span><span class="k">this</span><span class="p">.</span><span class="n">context</span><span class="p">);</span>
<span class="lineno">73</span>         <span class="p">}</span>
<span class="lineno">74</span>     <span class="p">}</span>
<span class="lineno">75</span> <span class="p">}</span>
</code></pre></div>

<p>See how on line 42 the code blunders well over the guide. Apologies to Linux users; there seems to be a huge discrepancy in size between Windows monospaced and Linux monospaced fonts and so the code looks piddly on Linux.</p>
</div>
    <div class="post-foot">
     
	    <div class="post-tag"><a href="/bijectiv/tag/blog">blog</a></div>
    
	    <div class="post-tag"><a href="/bijectiv/tag/infrastructure">infrastructure</a></div>
    
    </div>
</div>


	            </div>
            <div id="foot">
	            <p>Rebuild All succeeded - 2014 - London - UK | <a href="http://github.com/TheMouthOfACow">http://github.com/TheMouthOfACow</a> | <a href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0 licence</a>
	            </p>
            </div>
            <div id="overlay"></div>
	        <div id="about">
		        <image id="about-close" src="/bijectiv/resources/images/ring.png" />

                <h1>About</h1>
                <div>
                    <img class="right" src="https://download-codeplex.sec.s-msft.com/download/Avatar.ashx?DownloadId=815244" alt="Brian Tyler" />
                    <p>This site documents how the <a href="https://github.com/TheMouthOfACow/bijectiv" />bijectiv</a> object-to-object .NET mapping library got/is getting built.<p>
                    <p>Bijectiv is (being) written by Brian Tyler in his (very limited, see small child to the right) spare time; by day I'm a technical architect developer at Aon's global headquarters in London, the rest of the time I do <a href="http://kozuetyler.wordpress.com/">family stuff</a>.</p>
                    <p>The purpose of the library is to provide an industrial strength, open source mapper for .NET and the reason for the blog is to describe why it is built the way it is and to act as a resource for other developers who are interested in how a library could be designed and coded.</p>
                    <p>The blog is written using <a href="http://jekyllrb.com/">Jekyll</a> on Mint Linux (apparently that's the way the cool kids do it these days). The library is written in Visual Studio 2013 Ultimate on Windows 8.1 and runs portably in the .NET 4.0 runtime.</p>
                    <h2>Copyleft</h2>
                    <p>You do not need permission to share anything I have written on this site or to reuse my images even for commercial purposes. They are all published under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International (CC BY 4.0) licence</a>. A mention of the licence however is compulsory and a link back to the original is a nice courtesy.</a></p>
                    <p>... this comes with an observation: cloning posts wholesale doesn't create value it just just increases universal entropy.
                </div>
	        </div>
	        <script type="text/javascript" >
	            $( "#about-close" ).click(function() {
		            $( "#overlay" ).hide();
		            $( "#about" ).hide();
	            });
	
	            $( "#overlay" ).click(function() {
		            $( "#overlay" ).hide();
		            $( "#about" ).hide();
	            });
	
	            $(document).keyup(function(e) {
	              if (e.keyCode == 27) {
		            $( "#overlay" ).hide();
		            $( "#about" ).hide();
	            }   // esc
	            });
	
	            $( "#qm" ).click(function() {
		            $( "#overlay" ).show();
		            $( "#about" ).show();
	            });
	        </script>
        </div>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-5245850-6', 'themouthofacow.github.io');
          ga('send', 'pageview');

        </script>
    </body>
</html>
